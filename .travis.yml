language: python
python:
  - 2.7
virtualenv:
  system_site_packages: true
before_install:
  - pip uninstall numpy -y
  - sudo add-apt-repository -y ppa:cython-dev/master-ppa
  - sudo apt-get update -qq
  - sudo apt-get install -qq cython python-numpy python-scipy
env:
  - FLAVOR=_cc
  - FLAVOR=_cy
  - FLAVOR=_cy PYDISTRIBUTIONS_USE_LIB=1
install:
  - make install$FLAVOR
  - pip freeze
script:
  - LD_LIBRARY_PATH="$LD_LIBRARY_PATH:$VIRTUAL_ENV/lib" make test$FLAVOR
